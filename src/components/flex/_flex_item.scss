/*!
 * SPDX-License-Identifier: Apache-2.0
 *
 * The OpenSearch Contributors require contributions made to
 * this file be licensed under the Apache-2.0 license or a
 * compatible open source license.
 *
 * Modifications Copyright OpenSearch Contributors. See
 * GitHub history for details.
 */

/**
 * 1. Allow OuiPanels to expand to fill the item.
 * 2. IE11 hack forces inner content of flex items to respect a higher parent's width (mostly) and
 *    not cause weird wrapping issues.
 */
.ouiFlexItem {
  @include internetExplorerOnly {
    min-width: 1px; /* 2 */
  }

  display: flex; /* 1 */
  flex-direction: column; /* 1 */

  /*
   * 1. We need the extra specificity here to override the FlexGroup > FlexItem styles.
   * 2. FlexItem can be manually set to not grow or shrink if needed (default allows grow and shrink).
   * 3. FlexItem basis can be set to 'auto' (defaul use flex-basis: 0%)
   * 4. FlexItem also can be given values for grow, shrink and basis:
   *    - grow: 1..10
   *    - shrink: 1..10
   *    - basis: auto, max-content, min-content, fit-content
   */

  &.ouiFlexItem--flexGrowZero { /* 1 */
    flex-grow: 0; /* 2 */
    flex-basis: auto; /* 2 */
  }

  &.ouiFlexItem--flexShrinkZero { /* 1 */
    flex-shrink: 0; /* 2 */
  }

  &.ouiFlexItem--flexBasisAuto { /* 1 */
    flex-basis: auto; /* 3 */
  }

  @for $i from 1 through 10 { /* 4 */
    &.ouiFlexItem--flexGrow#{$i} { /* 4 */
      flex-grow: $i; /* 4 */
    }
  }

  @for $i from 1 through 10 { /* 4 */
    &.ouiFlexItem--flexShrink#{$i} { /* 4 */
      flex-shrink: $i; /* 4 */
    }
  }

  $flexBasisOptions: auto, max-content, min-content, fit-content; /* 4 */

  @each $basis in $flexBasisOptions { /* 4 */
    &.ouiFlexItem--flexBasis-#{$basis} { /* 4 */
      flex-basis: $basis; /* 3 */
    }
  }

}

// On mobile we force them to stack and act the same.
@include ouiBreakpoint('xs', 's') {
  .ouiFlexGroup--responsive > .ouiFlexItem,
  .ouiFlexGrid--responsive > .ouiFlexItem {
    // sass-lint:disable-block no-important
    width: 100% !important;
    flex-basis: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    margin-bottom: $ouiSize !important;
  }
}
